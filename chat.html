<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChatUP - Conversas</title>
    <link rel="stylesheet" href="styles/chat.css">
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
</head>
<body>

    <!-- Menu Mobile -->
<div class="mobile-header" id="mobileHeader" style="display: none;">
    <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
        <span></span>
        <span></span>
        <span></span>
    </button>
    <div class="mobile-chat-info" id="mobileChatInfo">
        <div class="mobile-user-avatar" id="mobileChatAvatar">U</div>
        <div class="mobile-user-info">
            <div class="mobile-user-name" id="mobileChatName">Usu√°rio</div>
            <div class="mobile-user-status" id="mobileChatStatus">Online</div>
        </div>
    </div>
    <button class="mobile-back-btn" onclick="showFriendsList()" id="mobileBackBtn" style="display: none;">
        ‚Üê Voltar
    </button>
</div>

<div class="mobile-overlay" id="mobileOverlay" onclick="toggleMobileMenu()"></div>
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="user-info">
                <div class="user-avatar" id="currentUserAvatar">U</div>
                <h3 id="currentUserName">Usu√°rio</h3>
                <div class="user-id">@<span id="currentUserId">usuario</span></div>
                
                <!-- Bot√£o de Toggle de Tema -->
                <div class="theme-toggle-container">
                    <button class="theme-toggle-btn" id="themeToggle" onclick="toggleTheme()">
                        <span class="theme-icon">üåô</span>
                        <span class="theme-text">Modo Escuro</span>
                    </button>
                </div>

                  <!-- Painel de Status do Espa√ßo -->
                <div class="space-status" id="spaceStatus" style="
                    background: #2d3748;
                    padding: 10px;
                    border-radius: 8px;
                    margin: 10px 0;
                    text-align: center;
                    display: none;"
                >
                <div style="font-size: 12px; color: #a0aec0; margin-bottom: 5px;">
                    üíæ Espa√ßo Usado
                </div>
                <div class="space-bar">
                    <div class="space-fill" id="spaceFill" style="
                        height: 6px;
                        background: #48bb78;
                        border-radius: 3px;
                        width: 0%;
                        transition: width 0.5s;
                    "></div>
                </div>
                <div class="space-text" id="spaceText" style="
                    font-size: 11px;
                    color: #e2e8f0;
                    margin-top: 3px;
                ">
                    Calculando...
                </div>
            </div>
                
                <button class="logout-btn" onclick="logout()">Sair</button>
            </div>

            
            
            <!-- Abas de Navega√ß√£o -->
            <div class="sidebar-tabs">
                <button class="tab-btn active" data-tab="friends">üë• Amigos</button>
                <button class="tab-btn" data-tab="search">üîç Buscar</button>
                <button class="tab-btn" data-tab="requests" id="requestsTab">
                    üì® Solicita√ß√µes <span class="badge" id="requestsBadge" style="display: none;">0</span>
                </button>
            </div>
            
            <!-- Conte√∫do das Abas -->
            <div class="tab-content">
                <!-- Aba: Amigos -->
                <div class="tab-pane active" id="friendsTab">
                    <div class="search-box">
                        <input type="text" id="friendSearch" placeholder="Buscar nos amigos...">
                    </div>
                    <div class="friends-list" id="friendsList">
                        <div class="loading">Carregando amigos...</div>
                    </div>
                </div>
                
                <!-- Aba: Buscar -->
                <div class="tab-pane" id="searchTab">
                    <div class="search-box">
                        <input type="text" id="userSearch" placeholder="Buscar por username...">
                    </div>
                    <div class="search-results" id="searchResults">
                        <div class="info-message">
                            Digite um username para buscar
                        </div>
                    </div>
                </div>
                
                <!-- Aba: Solicita√ß√µes -->
                <div class="tab-pane" id="requestsTab">
                    <div class="requests-list" id="requestsList">
                        <div class="info-message">
                            Nenhuma solicita√ß√£o pendente
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- √Årea do Chat -->
        <div class="chat-area">
            <div class="chat-header" id="chatHeader">
                <div class="no-chat-selected" id="noChatSelected">
                    <div class="welcome-icon">üí¨</div>
                    <h3>Bem-vindo ao ChatUP!</h3>
                    <p>Selecione um amigo para come√ßar a conversar</p>
                </div>
                <div id="activeChatHeader" style="display: none;">
                    <div class="user-avatar-small" id="activeChatAvatar">U</div>
                    <div class="chat-user-info">
                        <div id="activeChatName">Usu√°rio</div>
                        <div class="user-status" id="activeChatStatus">Offline</div>
                    </div>
                    <div class="chat-actions">
                        <button class="action-btn" title="Informa√ß√µes">‚ÑπÔ∏è</button>
                    </div>
                </div>
            </div>
            
            <div class="chat-messages" id="chatMessages">
                <div class="welcome-message">
                    <p>Selecione uma conversa para come√ßar</p>
                </div>
            </div>
            
            <div class="chat-input" id="chatInput" style="display: none;">
                <input type="text" id="messageInput" placeholder="Digite sua mensagem...">
                <button onclick="sendMessage()">
                    <span class="send-icon">‚û§</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Modal de Perfil do Usu√°rio -->
    <div class="modal" id="userProfileModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Perfil do Usu√°rio</h3>
                <button class="close-btn" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body" id="userProfileContent">
                <!-- Conte√∫do din√¢mico -->
            </div>
        </div>
    </div>

    <script src="js/config.js"></script>
    <script src="js/chat.js"></script>
</body>
</html>