<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChatUP - Entrar</title>
    <link rel="stylesheet" href="./styles/auth.css">
    <link rel="favicon" href="./assets/compromisso-social.png">
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
</head>
<body>
    <div class="container">
        <div class="auth-screen">
            <!-- Tela de Boas-Vindas -->
            <div class="welcome-screen" id="welcomeScreen">
                <div class="logo">
                    <div class="logo-icon">üí¨</div>
                    <h1>ChatUP</h1>
                    <p>Conecte-se com amigos em tempo real</p>
                </div>
                
                <div class="welcome-buttons">
                    <button class="btn btn-primary btn-large" onclick="showSignup()">
                        Criar Conta
                    </button>
                    <button class="btn btn-secondary btn-large" onclick="showLogin()">
                        Fazer Login
                    </button>
                </div>
            </div>

            <!-- Tela de Cadastro -->
            <div class="form-screen" id="signupScreen" style="display: none;">
                <div class="form-header">
                    <button class="back-btn" onclick="showWelcome()">‚Üê</button>
                    <h2>Criar sua conta</h2>
                </div>

                <form class="auth-form" onsubmit="createUser(event)">
                    <div class="form-group">
                        <label for="displayName">Nome de exibi√ß√£o</label>
                        <input 
                            type="text" 
                            id="displayName" 
                            placeholder="Como quer ser chamado?"
                            maxlength="30"
                            required
                        >
                        <div class="help-text">Este √© o nome que outros usu√°rios ver√£o</div>
                    </div>

                    <div class="form-group">
                        <label for="username">Nome de usu√°rio</label>
                        <div class="input-with-prefix">
                            <span class="input-prefix">@</span>
                            <input 
                                type="text" 
                                id="username" 
                                placeholder="nomeusuario"
                                pattern="[a-zA-Z0-9_]+"
                                maxlength="20"
                                required
                            >
                        </div>
                        <div class="help-text">
                            Somente letras, n√∫meros e underscore. M√°x. 20 caracteres.
                        </div>
                        <div class="validation-message" id="usernameValidation"></div>
                    </div>

                    <button type="submit" class="btn btn-primary btn-large" id="signupBtn">
                        Criar Conta
                    </button>
                </form>

                <div class="form-footer">
                    <p>J√° tem uma conta? <a href="#" onclick="showLogin()">Fazer login</a></p>
                </div>
            </div>

            <!-- Tela de Login -->
            <div class="form-screen" id="loginScreen" style="display: none;">
                <div class="form-header">
                    <button class="back-btn" onclick="showWelcome()">‚Üê</button>
                    <h2>Fazer login</h2>
                </div>

                <form class="auth-form" onsubmit="loginUser(event)">
                    <div class="form-group">
                        <label for="loginUsername">Nome de usu√°rio</label>
                        <div class="input-with-prefix">
                            <span class="input-prefix">@</span>
                            <input 
                                type="text" 
                                id="loginUsername" 
                                placeholder="seuusuario"
                                required
                            >
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary btn-large">
                        Entrar no Chat
                    </button>
                </form>

                <div class="form-footer">
                    <p>N√£o tem conta? <a href="#" onclick="showSignup()">Criar uma</a></p>
                </div>
            </div>

            <!-- Tela de Sucesso no Cadastro -->
            <div class="success-screen" id="successScreen" style="display: none;">
                <div class="success-icon">üéâ</div>
                <h2>Conta criada com sucesso!</h2>
                <div class="user-info-card">
                    <div class="user-avatar-large">
                        <span id="successAvatar">U</span>
                    </div>
                    <div class="user-details">
                        <h3 id="successDisplayName">Usu√°rio</h3>
                        <div class="username">@<span id="successUsername">usuario</span></div>
                    </div>
                </div>
                <p class="success-message">
                    Sua conta foi criada e voc√™ j√° pode come√ßar a conversar!
                </p>
                <button class="btn btn-primary btn-large" onclick="goToChat()">
                    Come√ßar a Conversar
                </button>
            </div>
        </div>
    </div>
    

    <script src="./js/config.js"></script>
    <script src="./js/auth.js"></script>

    <script>
        // Sistema de tema para login
        function initLoginTheme() {
            const savedTheme = localStorage.getItem('chatup-theme');
            const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            let theme = savedTheme || (systemPrefersDark ? 'dark' : 'light');
            document.documentElement.setAttribute('data-theme', theme);
        }
        
        document.addEventListener('DOMContentLoaded', initLoginTheme);
    </script>
</body>

</html>
